import{_ as L}from"./SakuraPage.vue_vue_type_style_index_0_lang.Csrl0MhX.js";import{_ as $}from"./SakuraImageCard.DLNNM-pW.js";import"./chunks/pinia.C8xpNjyg.js";import{j as h,l as q,d as B}from"./app.C9BwLGJy.js";import"./chunks/dayjs.BsdSHi3w.js";import{x as D,G as I,M as y,K as M,a3 as p,a2 as m,a6 as l,P,ak as V,V as u,ag as A,T as d,aa as E,af as k,$ as x,a0 as F,a1 as g,a8 as f,ai as N}from"./framework.DIhz9aLV.js";import"./SakuraMultiColumns.vue_vue_type_script_setup_true_lang.ZKi9iEbF.js";import"./chunks/vue-router._bgINN5_.js";import"./chunks/vue-i18n.BQpbHoSW.js";/* empty css                    */import"./chunks/nprogress.Cm54BOVh.js";function R(e,r=!1){const n=D();return I(()=>e,async()=>{let a;if(typeof e=="string"){if(!h)return;a=await fetch(e).then(c=>c.json())||[]}else{if(!h){a=e;return}a=[];const c=async t=>{try{const o=await fetch(t.rss);if(o.ok){const _=await o.text(),i=new DOMParser().parseFromString(_,"application/xml"),v=t.blog||i.querySelector("title")?.textContent,S=t.name||i.querySelector("author > name")?.textContent,C=t.url||i.querySelector('link[rel="alternate"]')?.getAttribute("href"),w=t.desc||i.querySelector("subtitle")?.textContent,b={avatar:t.avatar||i.querySelector("logo")?.textContent,name:S,url:C,color:"#EE9CA7",blog:v,desc:w};a.push(b)}else console.error(`Failed to fetch XML from ${t.rss}:`,o.status,o.statusText)}catch(o){console.error(`Error fetching XML from ${t.rss}:`,o)}};await Promise.all(e.map(c))}n.value=r?Array.from(a).sort(()=>Math.random()-.5):a},{immediate:!0}),{data:n}}const T={class:"links"},j={class:"link-items"},X=["href","title"],z={class:"link-left"},G={class:"link-info",m:"l-2"},K={class:"link-blog",font:"serif black"},O={class:"link-desc"},U=y({__name:"SakuraLinks",props:{links:{},random:{type:Boolean},errorImg:{}},setup(e){const r=e,n=q(),{data:a}=R(r.links,r.random),c=M(()=>n.value.ui.links?.image);return(t,o)=>{const _=$;return m(),p("div",T,[l("ul",j,[(m(!0),p(P,null,V(u(a),(s,i)=>(m(),p("li",{key:i,class:"link-item",style:A(`--primary-color: ${s.color}`)},[l("a",{class:"link-url",p:"x-4 y-2",href:s.url,title:s.name,alt:"portrait",rel:"friend",target:"_blank"},[l("div",z,[d(_,E({ref_for:!0},c.value,{class:"link-avatar",width:"64",height:"64",w:"16",h:"16",src:s.avatar,alt:s.name,"error-img":t.errorImg}),null,16,["src","alt","error-img"])]),l("div",G,[l("div",K,k(s.blog),1),l("div",O,k(s.desc),1)])],8,X)],4))),128))])])}}}),H=x(U,[["__scopeId","data-v-fb22ebcf"]]),J=y({__name:"SakuraLinksLayout",setup(e){const r=B();return(n,a)=>{const c=H,t=F("RouterView"),o=L;return m(),g(o,null,{default:f(()=>[d(t,null,{default:f(({Component:_})=>[(m(),g(N(_),null,{"main-content":f(()=>[d(c,{links:u(r).links,random:u(r).random,"error-img":u(r).errorImg},null,8,["links","random","error-img"])]),_:1}))]),_:1})]),_:1})}}}),Q={};function W(e,r){const n=J;return m(),g(n)}const mt=x(Q,[["render",W]]);export{mt as default};
