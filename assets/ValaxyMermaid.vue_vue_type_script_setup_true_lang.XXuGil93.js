const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/mermaid.core.B1Y45Jel.js","assets/framework.DIhz9aLV.js","assets/chunks/dayjs.BsdSHi3w.js","assets/marked.esm.D2OCE8en.js"])))=>i.map(i=>d[i]);
import{M as _,x as f,K as C,am as h,a3 as B,a2 as b,_ as E,Q as F,G as S,a1 as k}from"./framework.DIhz9aLV.js";import"./chunks/pinia.C8xpNjyg.js";import{p as M,q as U,j as D}from"./app.C9BwLGJy.js";import"./chunks/dayjs.BsdSHi3w.js";function p(e){return Object.keys(e).forEach(t=>e[t]===void 0?delete e[t]:{}),e}const m=typeof Buffer=="function",x=typeof TextDecoder=="function"?new TextDecoder:void 0;typeof TextEncoder=="function"&&new TextEncoder;const T="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",L=Array.prototype.slice.call(T),d=(e=>{let t={};return e.forEach((r,o)=>t[r]=o),t})(L),N=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,u=String.fromCharCode.bind(String),A=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):e=>new Uint8Array(Array.prototype.slice.call(e,0)),y=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),O=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,R=e=>{switch(e.length){case 4:var t=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),r=t-65536;return u((r>>>10)+55296)+u((r&1023)+56320);case 3:return u((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return u((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},z=e=>e.replace(O,R),H=e=>{if(e=e.replace(/\s+/g,""),!N.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(e.length&3));let t,r,o,n=[];for(let a=0;a<e.length;)t=d[e.charAt(a++)]<<18|d[e.charAt(a++)]<<12|(r=d[e.charAt(a++)])<<6|(o=d[e.charAt(a++)]),r===64?n.push(u(t>>16&255)):o===64?n.push(u(t>>16&255,t>>8&255)):n.push(u(t>>16&255,t>>8&255,t&255));return n.join("")},g=typeof atob=="function"?e=>atob(y(e)):m?e=>Buffer.from(e,"base64").toString("binary"):H,Z=m?e=>A(Buffer.from(e,"base64")):e=>A(g(e).split("").map(t=>t.charCodeAt(0))),j=m?e=>Buffer.from(e,"base64").toString("utf8"):x?e=>x.decode(Z(e)):e=>z(g(e)),I=e=>y(e.replace(/[-_]/g,t=>t=="-"?"+":"/")),P=e=>j(I(e));let V=e=>crypto.getRandomValues(new Uint8Array(e)),$=(e,t,r)=>{let o=(2<<Math.log(e.length-1)/Math.LN2)-1,n=-~(1.6*o*t/e.length);return(a=t)=>{let s="";for(;;){let i=r(n),l=n|0;for(;l--;)if(s+=e[i[l]&o]||"",s.length===a)return s}}},q=(e,t=21)=>$(e,t,V);const G=M(()=>({theme:"default"})),J=q("abcedfghicklmn",10),v=new Map;async function K(e,t,r){const o=t+JSON.stringify(r),n=v.get(o);if(n)return n;e.initialize({startOnLoad:!1,...p(G()||{}),...p(r)});const a=P(t),s=J(),{svg:i}=await e.render(s,a);return v.set(o,i),i}const Q=_({__name:"ShadowRoot",props:{innerHtml:{}},emits:["shadow"],setup(e,{emit:t}){const r=e,o=t,n=f(),a=C(()=>n.value?n.value.shadowRoot||n.value.attachShadow({mode:"open"}):null);return h(()=>{a.value&&r.innerHtml&&(o("shadow",a.value),a.value.innerHTML=r.innerHtml)}),(s,i)=>(b(),B("div",{ref_key:"el",ref:n},null,512))}}),te=_({__name:"ValaxyMermaid",props:{code:{},scale:{},theme:{}},setup(e){const t=e,r=F(),o=f(),n=f(""),a=U();return D&&E(()=>import("./mermaid.core.B1Y45Jel.js").then(s=>s.bB),__vite__mapDeps([0,1,2,3])).then(s=>s.default).then(s=>{s.startOnLoad=!1,s.initialize({startOnLoad:!1}),h(async l=>{let c=!1;l(()=>{c=!0});const w=await K(s,t.code||"",{theme:t.theme||(a.isDark?"dark":void 0),...r.attrs});c||(n.value=w)});const i=f();S(n,()=>{i.value=void 0}),h(()=>{const l=o.value?.children?.[0];if(l&&l.hasAttribute("viewBox")&&i.value==null){const c=Number.parseFloat(l.getAttribute("viewBox")?.split(" ")[3]||"");i.value=Number.isNaN(c)?void 0:c}},{flush:"post"}),h(()=>{const l=o.value?.children?.[0];l!=null&&t.scale!=null&&i.value!=null&&(l.setAttribute("height",`${i.value*t.scale}`),l.removeAttribute("width"),l.removeAttribute("style"))},{flush:"post"})}),(s,i)=>(b(),k(Q,{class:"mermaid","inner-html":n.value,onShadow:i[0]||(i[0]=l=>o.value=l)},null,8,["inner-html"]))}});export{te as _};
