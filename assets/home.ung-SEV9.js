import"./chunks/pinia.C8xpNjyg.js";import{M as b,K as y,a0 as ke,a3 as m,a2 as c,a1 as T,a4 as k,a8 as x,a6 as g,P,ak as F,a9 as z,af as Z,a5 as A,x as j,R as G,S as re,V as f,$ as E,T as I,aa as ae,G as R,at as we,a7 as S,ag as W,au as Te,ah as Se,av as be}from"./framework.DIhz9aLV.js";import{c as Q,u as M,l as C,z as oe,G as Ae,H as Pe,i as Ie,I as Ce,J as Ee,q as xe,K as Re}from"./app.C9BwLGJy.js";import"./chunks/dayjs.BsdSHi3w.js";import{_ as Ne}from"./SakuraMultiColumns.vue_vue_type_script_setup_true_lang.ZKi9iEbF.js";import{a as Le,_ as He}from"./SakuraPostList.DRFzXxDV.js";import{_ as Me,i as Ve}from"./SakuraImageCard.DLNNM-pW.js";import{a as $e,u as qe,o as De}from"./chunks/vue-router._bgINN5_.js";import{a as le}from"./index.CeKMRR8-.js";import"./chunks/vue-i18n.BQpbHoSW.js";/* empty css                    */import"./chunks/nprogress.Cm54BOVh.js";import"./SakuraPostDate.DIsTRA-w.js";function Be(){const s=$e();function e(n){return typeof n=="string"&&n.startsWith("http")}function t(n){e(n)?window.location.href=n:s.push({path:n})}return{isExternalLink:e,to:t}}const Fe={class:"pagination"},Ue=b({__name:"ValaxyPagination",props:{curPage:{},total:{},pageSize:{}},emits:["pageChange"],setup(s,{emit:e}){const t=s,n=e,r=y(()=>Math.ceil(t.total/t.pageSize)),a=y(()=>t.curPage===1||t.curPage===r.value?3:2);function u(i){return i===1||i===r.value?!0:i>t.curPage-a.value&&i<t.curPage+a.value}function o(i){return n("pageChange",i),i===1?"/":`/page/${i}`}return(i,l)=>{const p=ke("RouterLink");return c(),m("nav",Fe,[i.curPage!==1?(c(),T(p,{key:0,class:"page-number",to:o(i.curPage-1),"aria-label":"prev"},{default:x(()=>[...l[0]||(l[0]=[g("div",{"i-ri-arrow-left-s-line":""},null,-1)])]),_:1},8,["to"])):k("v-if",!0),(c(!0),m(P,null,F(r.value,d=>(c(),m(P,null,[u(d)?(c(),T(p,{key:d,class:A(["page-number",i.curPage===d&&"active"]),to:o(d)},{default:x(()=>[z(Z(d),1)]),_:2},1032,["class","to"])):d===i.curPage-a.value?(c(),m("span",{key:`prev-space-${d}`,class:"space",disabled:""}," ... ")):d===i.curPage+a.value?(c(),m("span",{key:`next-space-${d}`,class:"space",disabled:""}," ... ")):k("v-if",!0)],64))),256)),i.curPage!==r.value?(c(),T(p,{key:1,class:"page-number",to:o(i.curPage+1),"aria-label":"next"},{default:x(()=>[...l[1]||(l[1]=[g("div",{"i-ri-arrow-right-s-line":""},null,-1)])]),_:1},8,["to"])):k("v-if",!0)])}}}),Oe=b({__name:"SakuraPaginationStandard",props:{pageSize:{},total:{}},setup(s){const e=s,t=Q(),n=M(),r=C(),a=oe({type:""}),u=y(()=>a.value),o=y(()=>n.curPage||1),i=y(()=>e.pageSize||r.value.pagination?.itemsPerPage||t.value.pageSize);return(l,p)=>{const d=Ue;return c(),T(d,{"cur-page":o.value,"page-size":i.value,total:l.total||u.value.length},null,8,["cur-page","page-size","total"])}}}),ze={class:"sakura-pagination-scroll mb-17 mt-20 flex justify-center"},We={key:1,class:"text-center"},Ze=b({__name:"SakuraPaginationInfiniteScroll",setup(s){const e=Q(),t=M(),n=C(),r=oe({type:""}),a=n.value.pagination,u=y(()=>a?.itemsPerPage||e.value.pageSize),o=y(()=>r.value),i=y(()=>a?.animation?"sakura-fade-up":"identification"),l=j(Math.ceil(o.value.length/u.value));function p(){t.loadMultiple<l.value&&(t.loadMultiple+=1,(a?.animation||a?.infiniteScrollOptions?.preload)&&v())}function d(h,w){h.forEach(V=>{V.isIntersecting&&!V.target.classList.contains(i.value)&&(V.target.classList.add(i.value),t.paginationElementPositionsNumber+=1,t.paginationElementPositionsNumber===t.paginationTargets.length-1&&a?.infiniteScrollOptions?.preload&&p())})}function v(){setTimeout(()=>{t.paginationTargets=Array.from(document.querySelectorAll(".article-list"));for(let h=t.paginationElementPositionsNumber;h<t.paginationTargets.length;h++){const w=document.getElementById(`article-${h}`);if(w===null){console.error(`Element with ID 'article-${h}' not found. This may prevent preload from working properly.`);return}a?.animation&&w.classList.add("op-0"),t.paginationObserver.observe(w)}},0)}function _(){t.paginationTargets.forEach(h=>{t.paginationObserver?.unobserve(h)})}return G(()=>{(a?.animation||a?.infiniteScrollOptions?.preload)&&(t.paginationTargets.length===0&&(t.paginationObserver=new IntersectionObserver(d,{threshold:a.infiniteScrollOptions?.threshold??.01})),v())}),re(()=>{_()}),(h,w)=>(c(),m("nav",ze,[f(t).loadMultiple<l.value?(c(),m("button",{key:0,class:"load-more-button px-8 py-2",onClick:p}," Previous ")):(c(),m("div",We," 很高兴你翻到这里，但是真的没有了... "))]))}}),je=E(Ze,[["__scopeId","data-v-9fd3a1b2"]]),Ge=b({__name:"SakuraPagination",setup(s){const e=C();return(t,n)=>{const r=je,a=Oe;return c(),m(P,null,[f(e).pagination.type==="infinite-scroll"?(c(),T(r,{key:0})):k("v-if",!0),f(e).pagination.type==="standard"?(c(),T(a,{key:1})):k("v-if",!0)],64)}}}),Qe={key:0,class:"sakura-pinned-post <md:hidden"},Je={class:"sakura-card sakura-pinned-post-card flex"},Ye=b({__name:"SakuraPinnedPost",props:{text:{},entries:{},icon:{}},setup(s){const e=s,t=C(),n=Be(),r=y(()=>e.icon??t.value.ui.pinnedPost?.icon),a=y(()=>e.text??t.value.pinnedPost?.text),u=y(()=>e.entries??t.value.pinnedPost?.entries),o=y(()=>t.value.ui.pinnedPost?.image);return(i,l)=>{const p=Le,d=Me;return u.value?.length?(c(),m("div",Qe,[I(p,{icon:r.value,text:a.value},null,8,["icon","text"]),g("div",Je,[(c(!0),m(P,null,F(u.value,(v,_)=>(c(),T(d,ae({key:_},{ref_for:!0},o.value,{"data-title":v.title,to:v.link,"data-desc":v.desc,overlay:!0,src:v.img,class:v.link?"cursor-pointer":"",onClick:h=>f(n).to(v.link||"")}),null,16,["data-title","to","data-desc","src","class","onClick"]))),128))])])):k("v-if",!0)}}}),Xe=E(Ye,[["__scopeId","data-v-41aea0ff"]]),Ke={key:0,m:"b-5 t-10",p5:"",class:"sakura-notice-board sakura-card",flex:"~ items-center"},et={class:"notice-board-content relative transition-all duration-500 md:px-8 <md:pt-6"},tt=["innerHTML"],st=b({__name:"SakuraNoticeBoard",props:{icon:{},message:{}},setup(s){const e=s,t=C(),n=y(()=>e.message||t.value.notice?.message),r=y(()=>e.icon||t.value.ui.notice?.icon);return(a,u)=>n.value?(c(),m("div",Ke,[g("div",et,[g("span",{class:A([r.value,"notice-icon absolute left-1 top-1.3 inline-block transition-all duration-500 <md:left-50% <md:top-0"])},null,2),g("span",{class:"notice-message",innerHTML:n.value},null,8,tt)])])):k("v-if",!0)}}),it=E(st,[["__scopeId","data-v-043d2174"]]),nt=b({__name:"SakuraScrollDown",props:{icon:{}},setup(s){const e=s,t=C(),{toDown:n}=Ae(),r=y(()=>e.icon||t.value.ui.scrollDown?.icon);return(a,u)=>r.value?(c(),m("button",{key:0,class:"sakura-scroll-down",onClick:u[0]||(u[0]=(...o)=>f(n)&&f(n)(...o))},[g("span",{class:A([r.value,"sakura-scroll-down-icon sakura-loop-float inline-block"])},null,2)])):k("v-if",!0)}}),rt=E(nt,[["__scopeId","data-v-3649040e"]]),at="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAtFBMVEUAAABdTFRfTlZfTlZeTVVeTVVfTlZfTlZfTlZfTlZfTlZfTlZeTVVfTlZfTlZfTlZfTlZeTVVfTlZfTlbw7+Pf3NN6a26xn5ReTVXy8eW+rJ7p59zj4ddqWmHr6t7d2tDt7ODg3tTm5NrU0Mi9q52Sh4iJfX9vYGVoWF9jUlqqop+mlIvIw73RzcXY183JxL2UiYrMx8C3pZiflZSDdXh/cnXGwbuqmI+aj4+Pg4WyrKismpAMEQlmAAAAFHRSTlMA/Ng36d+lkmYqwRjqhoFAM+jGF+k1jLEAAAG4SURBVDjLjVNpd4IwEIQIHlSttkE2EoIBuSx42/P//69my6W0fe18YN9jJ7PJ7qzWYjTsE0PX56Q/HGnf0RuYOmRpkqQZ6Oag10nfTcbgxZtd6Pthvok9MKZ3N8cfwDsVgjFGqfqI4uSBdSVyT+B8oCqJEJwLRg9nIPfNeQJ7yehqVRKCQCgdGQGZVfUfYB8w6tqcXoEFEVjlPSZwliiPAtcMeYHJV4Gxd8C8ayu4baQs98Z40QGcKOajhULk1hH/vcJA9c9Mn1HcXjw5ztPCriMSCs8caUM95iXBWa8dJDjLpYpKU6xifaj1YcNoSTgerwkKbAN9jWQ7Rm8V1seXirDLiGakYUnAk11CmBqanvi0IXRKUD/R/ybMsUTAedghNCVIlqs5BG5NqC9L1fBYnpH6mawt8eGUBM6peiY2SnRfsawUBDZqZHoF+7nVDFvdGdberWI7LK1n/D5u48uX08owleEaw9gXmJaWsyAKaFBmhFvn+RtYj41pI4mZFitqv6FpW9tfnjnfSnvLpS99zov3Bdq+wcyCZJ9vFcf2fbmVeZyBNftt9Xa4evPp47+Xt7v+xu36fwLwPlAPnsX7kwAAAABJRU5ErkJggg==",ot="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAABAlBMVEUAAABfTlZeTVVdS1ReTVVeTVVfTlZfTlZfTlZfTlZfTlZeTVVfTlZfTlZfTlZfTlZfTlZfTlZfTlZfTlZfTlZfTlZfTlZfTlZfTlbw7+Py8eVeTVW9q52akI/u7OHi4NWUgn1qWmHm5Nm+rJ7e29Hr6d7k4tjU0MiJfX9vYGVoWF/g3tSqop+/rZ5jUlrp59yCdXjRzcXIw72RhYbb2s/Y18zNyMHGwLq9t7G5qJqCcnN9b3J8a2x4aGzJxL22pJiViori4dbV0smhl5ayoJWdk5KejIWLf4GId3WxqaalnJq4ppmkkoqYhoGPfHl0ZGjJxb7CvLa1sKq4p5qpl45iU1lqIFriAAAAGXRSTlMA2On8+9+SZjcqGOrFv6akhoE1QTrVMBfpaHUHFAAAAftJREFUOMuNU+dy4jAQtk0PnbST1pFiYxuDOTC99wC55JLr7/8qJ0suhMzN5fuhGe1+23elCJlUQVbicUUupjLSe6STiRi0GvV6owWxRDJ9pr4oZUGzm8uaYdS6TVsDpXxxqr/KgbbrmBhjhNhjdvYa5CqR/lIGd4gw0jcbE3nAaOiCfBnay7CmmMnbus4IguL0QK748XOw1jE6A9Z7kBd5lMDl9sR6y3CmUOL1ZbUhtx/P9n1OJD6jq2W9apOwE4K76ePsC4tFnTbyJZBk/UtoHSy+99Wvc/cHQcIDIbijJTJSKmabyCd8rk5eFuua+FKKiB1LSQXYWSFBVasPr4sn6qeCm1CQ5NYIoSDEaqVW1d9Td2zyqHjZkiWlUcMh4flZZU4mh/lxyAm1hiLF6waKQghUV/ffRp6ZUY//g/AaEUQIEhEm6uSw6A1JEEJudTFq05AweTjMwyS7LMkiNLmHsMzHRZOKtL0yi2eN+vWyuNuKL+u3yRp13mp7RHBAEK1mw9oTcjosjmhYUlppjC0x7qe+UIfjVvhyl8E1uMKj6Xq0MDMoByvXCz2324HeYit3K3FUZOg5b5ZSt/TtEa5vTtZ+OqLWgBoDixq0T+n25xyur6QQlTzU192BtRk4/b4zcL7bfyB/8+70juL0lt7pfSrffvB4/3v+fwF0OGfEMV9avwAAAABJRU5ErkJggg==",lt=["src"],ut=b({__name:"SakuraPlayer",setup(s){const e=M(),t=y(()=>e.wallpaperIsPlaying?at:ot);return(n,r)=>(c(),m("img",{src:t.value,"z-5":"",class:"sakura-player sakura-loop-fly cursor-pointer",style:{"animation-duration":"2s","--translate-distance":"0.2em"},onClick:r[0]||(r[0]=(...a)=>f(e).togglePlayPause&&f(e).togglePlayPause(...a))},null,8,lt))}}),ue=s=>Array.isArray(s),he=s=>ue(s)?s:[s];let ht=function(s){let e=function(h){return he(h).forEach(w=>_.set(Symbol(w.char?.innerText),r({...w}))),this},t=()=>i().filter(h=>h.typeable),n=function(h,w){let V=[..._.keys()];_.set(V[h],r(w))},r=h=>(h.shouldPauseCursor=function(){return!!(this.typeable||this.cursorable||this.deletable)},h),a=function(){_.forEach(h=>delete h.done)},u=function(){_=new Map,e(s)},o=()=>_,i=()=>Array.from(_.values()),l=h=>_.delete(h),p=()=>{const h=[];for(let[,w]of o())w.done||h.push(w);return h},d=(h=!1)=>h?i():i().filter(w=>!w.done),v=(h,w=!1)=>w?_.delete(h):_.get(h).done=!0,_=new Map;return e(s),{add:e,set:n,wipe:u,done:v,reset:a,destroy:l,getItems:d,getQueue:o,getTypeable:t,getPendingQueueItems:p}};const ce="data-typeit-id",N="ti-cursor",ct="END",dt={started:!1,completed:!1,frozen:!1,destroyed:!1},H={breakLines:!0,cursor:{autoPause:!0,autoPauseDelay:500,animation:{frames:[0,0,1].map(s=>({opacity:s})),options:{iterations:1/0,easing:"steps(2, start)",fill:"forwards"}}},cursorChar:"|",cursorSpeed:1e3,deleteSpeed:null,html:!0,lifeLike:!0,loop:!1,loopDelay:750,nextStringDelay:750,speed:100,startDelay:250,startDelete:!1,strings:[],waitUntilVisible:!1,beforeString:()=>{},afterString:()=>{},beforeStep:()=>{},afterStep:()=>{},afterComplete:()=>{}},pt=`[${ce}]:before {content: '.'; display: inline-block; width: 0; visibility: hidden;}`,B=s=>document.createElement(s),J=s=>document.createTextNode(s),de=(s,e="")=>{let t=B("style");t.id=e,t.appendChild(J(s)),document.head.appendChild(t)},K=s=>(ue(s)||(s=[s/2,s/2]),s),ee=(s,e)=>Math.abs(Math.random()*(s+e-(s-e))+(s-e));let te=s=>s/2;function ft(s){let{speed:e,deleteSpeed:t,lifeLike:n}=s;return t=t!==null?t:e/3,n?[ee(e,te(e)),ee(t,te(t))]:[e,t]}const pe=s=>Array.from(s);let Y=s=>([...s.childNodes].forEach(e=>{if(e.nodeValue){[...e.nodeValue].forEach(t=>{e.parentNode.insertBefore(J(t),e)}),e.remove();return}Y(e)}),s);const fe=s=>{let e=document.implementation.createHTMLDocument();return e.body.innerHTML=s,Y(e.body)};function me(s,e=!1,t=!1){let n=s.querySelector(`.${N}`),r=document.createTreeWalker(s,NodeFilter.SHOW_ALL,{acceptNode:o=>{if(n&&t){if(o.classList?.contains(N))return NodeFilter.FILTER_ACCEPT;if(n.contains(o))return NodeFilter.FILTER_REJECT}return o.classList?.contains(N)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}}),a,u=[];for(;a=r.nextNode();)a.originalParent||(a.originalParent=a.parentNode),u.push(a);return e?u.reverse():u}function mt(s){return me(fe(s))}function gt(s,e=!0){return e?mt(s):pe(s).map(J)}const vt=({index:s,newIndex:e,queueItems:t,cleanUp:n})=>{for(let r=s+1;r<e+1;r++)n(t[r][0])},ge=s=>Number.isInteger(s),se=({queueItems:s,selector:e,cursorPosition:t,to:n})=>{if(ge(e))return e*-1;let r=new RegExp(ct,"i").test(n),a=e?[...s].reverse().findIndex(({char:o})=>{let i=o.parentElement,l=i.matches(e);return r&&l?!0:l&&i.firstChild.isSameNode(o)}):-1;a<0&&(a=r?0:s.length-1);let u=r?0:1;return a-t+u},yt=s=>(s.forEach(clearTimeout),[]),q=(s,e)=>new Array(e).fill(s);let U=s=>new Promise(e=>{requestAnimationFrame(async()=>{e(await s())})}),ve=s=>s?.getAnimations().find(e=>e.id===s.dataset.tiAnimationId),ye=({cursor:s,frames:e,options:t})=>{let n=s.animate(e,t);return n.pause(),n.id=s.dataset.tiAnimationId,U(()=>{U(()=>{n.play()})}),n},_t=({cursor:s,options:e,cursorOptions:t})=>{if(!s||!t)return;let n=ve(s),r;n&&(e.delay=n.effect.getComputedTiming().delay,r=n.currentTime,n.cancel());let a=ye({cursor:s,frames:t.animation.frames,options:e});return r&&(a.currentTime=r),a},ie=s=>s.func?.call(null),kt=async({index:s,queueItems:e,wait:t,cursor:n,cursorOptions:r})=>{let a=e[s][1],u=[],o=s,i=a,l=()=>i&&!i.delay,p=a.shouldPauseCursor()&&r.autoPause;for(;l();)u.push(i),l()&&o++,i=e[o]?e[o][1]:null;if(u.length)return await U(async()=>{for(let _ of u)await ie(_)}),o-1;let d=ve(n),v;return d&&(v={...d.effect.getComputedTiming(),delay:p?r.autoPauseDelay:0}),await t(async()=>{d&&p&&d.cancel(),await U(()=>{ie(a)})},a.delay),await _t({cursor:n,options:v,cursorOptions:r}),s};const wt=(s,e)=>{new IntersectionObserver((n,r)=>{n.forEach(a=>{a.isIntersecting&&(e(),r.unobserve(s))})},{threshold:1}).observe(s)},Tt=()=>Math.random().toString().substring(2,9),O=s=>"value"in s;let St=s=>O(s)?pe(s.value):me(s,!0).filter(e=>!(e.childNodes.length>0)),L=s=>typeof s=="function"?s():s,X=(s,e=document,t=!1)=>e[`querySelector${t?"All":""}`](s),bt=s=>/body/i.test(s?.tagName),At=(s,e)=>{if(O(s)){s.value=`${s.value}${e.textContent}`;return}e.innerHTML="";let t=bt(e.originalParent)?s:e.originalParent||s,n=X("."+N,t)||null;n&&n.parentElement!==t&&(t=n.parentElement),t.insertBefore(e,n)};const Pt=s=>/<(.+)>(.*?)<\/(.+)>/.test(s.outerHTML),$=(s,e)=>Object.assign({},s,e);let It=s=>{if(typeof s=="object"){let e={},{frames:t,options:n}=H.cursor.animation;return e.animation=s.animation||{},e.animation.frames=s.animation?.frames||t,e.animation.options=$(n,s.animation?.options||{}),e.autoPause=s.autoPause??H.cursor.autoPause,e.autoPauseDelay=s.autoPauseDelay||H.cursor.autoPauseDelay,e}return s===!0?H.cursor:s};const Ct=(s,e)=>{if(!s)return;let t=s.parentNode;(t.childNodes.length>1||t.isSameNode(e)?s:t).remove()},Et=(s,e,t)=>{let n=e[t-1],r=X(`.${N}`,s);s=n?.parentNode||s,s.insertBefore(r,n||null)};function xt(s){return typeof s=="string"?X(s):s}let Rt={"font-family":"","font-weight":"","font-size":"","font-style":"","line-height":"",color:"",transform:"translateX(-.125em)"},Nt=(s,e)=>{let n=`${`[${ce}='${s}']`} .${N}`,r=getComputedStyle(e),a=Object.entries(Rt).reduce((u,[o,i])=>`${u} ${o}: var(--ti-cursor-${o}, ${i||r[o]});`,"");de(`${n} { display: inline-block; width: 0; ${a} }`,s)};function Lt(s){return s.replace(/<!--(.+?)-->/g,"").trim().split(/<br(?:\s*?)(?:\/)?>/)}let Ht=(s,e,t)=>Math.min(Math.max(e+s,0),t.length),Mt=(s,e,t)=>new Promise(n=>{let r=async()=>{await s(),n()};t.push(setTimeout(r,e||0))});class Vt{element;timeouts;cursorPosition;predictedCursorPosition;statuses={started:!1,completed:!1,frozen:!1,destroyed:!1,firing:!1};opts;id;queue;cursor;flushCallback=null;unfreeze=()=>{};constructor(e,t={}){this.opts=$(H,t),this.element=xt(e),this.timeouts=[],this.cursorPosition=0,this.unfreeze=()=>{},this.predictedCursorPosition=null,this.statuses=$({},dt),this.id=Tt(),this.queue=ht([{delay:this.opts.startDelay}]),this.#T(t),this.cursor=this.#b(),this.element.dataset.typeitId=this.id,de(pt),this.opts.strings.length&&this.#w()}go(){return this.statuses.started?this:(this.#m(),this.opts.waitUntilVisible?(wt(this.element,this.#i.bind(this)),this):(this.#i(),this))}destroy(e=!0){this.timeouts=yt(this.timeouts),L(e)&&this.cursor&&this.#c(this.cursor),this.statuses.destroyed=!0}reset(e){!this.is("destroyed")&&this.destroy(),e?(this.queue.wipe(),e(this)):this.queue.reset(),this.cursorPosition=0;for(let t in this.statuses)this.statuses[t]=!1;return this.element[this.#u()?"value":"innerHTML"]="",this}is=function(e){return this.statuses[e]};type(e,t={}){e=L(e);let{instant:n}=t,r=this.#n(t),u=gt(e,this.opts.html).map(i=>({func:()=>this.#h(i),char:i,delay:n||Pt(i)?0:this.#s(),typeable:i.nodeType===Node.TEXT_NODE})),o=[r[0],{func:async()=>await this.opts.beforeString(e,this)},...u,{func:async()=>await this.opts.afterString(e,this)},r[1]];return this.#e(o,t)}break(e={}){return this.#e({func:()=>this.#h(B("BR")),typeable:!0},e)}move(e,t={}){e=L(e);let n=this.#n(t),{instant:r,to:a}=t,u=se({queueItems:this.queue.getTypeable(),selector:e===null?"":e,to:a,cursorPosition:this.#o}),o=u<0?-1:1;return this.predictedCursorPosition=this.#o+u,this.#e([n[0],...q({func:()=>this.#d(o),delay:r?0:this.#s(),cursorable:!0},Math.abs(u)),n[1]],t)}exec(e,t={}){let n=this.#n(t);return this.#e([n[0],{func:()=>e(this)},n[1]],t)}options(e,t={}){return e=L(e),this.#r(e),this.#e({},t)}pause(e,t={}){return this.#e({delay:L(e)},t)}delete(e=null,t={}){e=L(e);let n=this.#n(t),r=e,{instant:a,to:u}=t,o=this.queue.getTypeable(),i=r===null?o.length:ge(r)?r:se({queueItems:o,selector:r,cursorPosition:this.#o,to:u});return this.#e([n[0],...q({func:this.#a.bind(this),delay:a?0:this.#s(1),deletable:!0},i),n[1]],t)}freeze(){this.statuses.frozen=!0}flush(e=null){return this.flushCallback=e||this.flushCallback,this.statuses.firing?this:(this.#m(),this.#i(!1).then(()=>{if(this.queue.getPendingQueueItems().length>0)return this.flush();this.flushCallback(),this.flushCallback=null}),this)}getQueue(){return this.queue}getOptions(){return this.opts}updateOptions(e){return this.#r(e)}getElement(){return this.element}empty(e={}){return this.#e({func:this.#y.bind(this)},e)}async#y(){if(this.#u()){this.element.value="";return}this.#t.forEach(this.#c.bind(this))}async#i(e=!0){this.statuses.started=!0,this.statuses.firing=!0;let t=n=>{this.queue.done(n,!e)};try{let n=[...this.queue.getQueue()];for(let a=0;a<n.length;a++){let[u,o]=n[a];if(!o.done){if(!o.deletable||o.deletable&&this.#t.length){let i=await this.#p(a,n);vt({index:a,newIndex:i,queueItems:n,cleanUp:t}),a=i}t(u)}}if(!e)return this.statuses.firing=!1,this;if(this.statuses.completed=!0,this.statuses.firing=!1,await this.opts.afterComplete(this),!this.opts.loop)throw"";let r=this.opts.loopDelay;this.#f(async()=>{await this.#_(r[0]),this.#i()},r[1])}catch{}return this.statuses.firing=!1,this}async#d(e){this.cursorPosition=Ht(e,this.cursorPosition,this.#t),Et(this.element,this.#t,this.cursorPosition)}async#_(e){let t=this.#o;t&&await this.#d({value:t});let n=this.#t.map(r=>[Symbol(),{func:this.#a.bind(this),delay:this.#s(1),deletable:!0,shouldPauseCursor:()=>!0}]);for(let r=0;r<n.length;r++)await this.#p(r,n);this.queue.reset(),this.queue.set(0,{delay:e})}#p(e,t){return kt({index:e,queueItems:t,wait:this.#f.bind(this),cursor:this.cursor,cursorOptions:this.opts.cursor})}async#f(e,t,n=!1){this.statuses.frozen&&await new Promise(r=>{this.unfreeze=()=>{this.statuses.frozen=!1,r()}}),n||await this.opts.beforeStep(this),await Mt(e,t,this.timeouts),n||await this.opts.afterStep(this)}async#m(){if(!this.#u()&&this.cursor&&this.element.appendChild(this.cursor),this.#v){Nt(this.id,this.element),this.cursor.dataset.tiAnimationId=this.id;let{animation:e}=this.opts.cursor,{frames:t,options:n}=e;ye({frames:t,cursor:this.cursor,options:{duration:this.opts.cursorSpeed,...n}})}}#u(){return O(this.element)}#e(e,t){return this.queue.add(e),this.#k(t),this}#k(e={}){let t=e.delay;t&&this.queue.add({delay:t})}#n(e={}){return[{func:()=>this.#r(e)},{func:()=>this.#r(this.opts)}]}async#r(e){this.opts=$(this.opts,e)}#w(){let e=this.opts.strings.filter(t=>!!t);e.forEach((t,n)=>{if(this.type(t),n+1===e.length)return;let r=this.opts.breakLines?[{func:()=>this.#h(B("BR")),typeable:!0}]:q({func:this.#a.bind(this),delay:this.#s(1)},this.queue.getTypeable().length);this.#g(r)})}#T=e=>{this.opts.cursor=It(e.cursor??H.cursor),this.opts.strings=this.#S(he(this.opts.strings)),this.opts=$(this.opts,{html:!this.#l&&this.opts.html,nextStringDelay:K(this.opts.nextStringDelay),loopDelay:K(this.opts.loopDelay)})};#S(e){let t=this.element.innerHTML;return t?(this.element.innerHTML="",this.opts.startDelete?(this.element.innerHTML=t,Y(this.element),this.#g(q({func:this.#a.bind(this),delay:this.#s(1),deletable:!0},this.#t.length)),e):Lt(t).concat(e)):e}#b(){if(this.#l)return null;let e=B("span");return e.className=N,this.#v?(e.innerHTML=fe(this.opts.cursorChar).innerHTML,e):(e.style.visibility="hidden",e)}#g(e){let t=this.opts.nextStringDelay;this.queue.add([{delay:t[0]},...e,{delay:t[1]}])}#h(e){At(this.element,e)}#a(){this.#t.length&&(this.#l?this.element.value=this.element.value.slice(0,-1):this.#c(this.#t[this.cursorPosition]))}#c(e){Ct(e,this.element)}#s(e=0){return ft(this.opts)[e]}get#o(){return this.predictedCursorPosition??this.cursorPosition}get#l(){return O(this.element)}get#v(){return!!this.opts.cursor&&!this.#l}get#t(){return St(this.element)}}const _e=b({__name:"SakuraTypewriter",props:{delay:{default:75},deleteSpeed:{},loop:{type:Boolean},pauseFor:{},typeString:{default:""},deleteAll:{type:[Number,Boolean,Array]}},emits:["typingFinished","deletionFinished","allTypingFinished"],setup(s,{emit:e}){const t=s,n=e,r=j(null);let a=!1,u=null;function o(i){const l={deleteSpeed:t.deleteSpeed,loop:t.loop};u===null&&(u=new Vt(r.value,l)),i.forEach((p,d)=>{if(u.type(p),typeof t.pauseFor=="number"?u.pause(t.pauseFor):Array.isArray(t.pauseFor)&&u.pause(t.pauseFor[d]),u.exec(()=>n("typingFinished")),d===i.length-1&&u.exec(()=>n("allTypingFinished")),t.deleteAll===!0)u.delete();else if(typeof t.deleteAll=="number")for(let v=0;v<p.length;v++)u.delete(1,{delay:t.deleteAll});else if(Array.isArray(t.deleteAll))for(let v=0;v<p.length;v++)u.delete(1,{delay:t.deleteAll[d]})}),u.flush(()=>{n("deletionFinished"),a&&(u=u.reset(),o(Array.isArray(t.typeString)?t.typeString:[t.typeString]),a=!1)})}return R(()=>t.typeString,()=>a=!0),G(()=>{t.typeString?o(Array.isArray(t.typeString)?t.typeString:[t.typeString]):Pe(()=>t.typeString,()=>{o(Array.isArray(t.typeString)?t.typeString:[t.typeString])})}),re(()=>u?.destroy()),(i,l)=>(c(),m("span",{ref_key:"typewriterElement",ref:r},null,512))}}),$t=["data-text"],qt=b({__name:"SakuraGlitchText",props:{text:{},delay:{},deleteSpeed:{},loop:{type:Boolean},pauseFor:{},typeString:{},deleteAll:{type:[Number,Boolean,Array]}},setup(s){const e=s;return(t,n)=>{const r=_e;return c(),m("h1",{class:"sakura-glitch-text","data-text":e.text||e.typeString},[e.text?(c(),m(P,{key:0},[z(Z(e.text),1)],64)):e.typeString?(c(),T(r,we(ae({key:1},e)),null,16)):k("v-if",!0)],8,$t)}}}),Dt=E(qt,[["__scopeId","data-v-b572b383"]]),D="data:image/svg+xml,%3c?xml%20version='1.0'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20t='1519637140387'%20class='icon'%20style=''%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='1300'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='200'%20height='200'%3e%3cdefs%3e%3cstyle%20type='text/css'%3e%3c/style%3e%3c/defs%3e%3cpath%20d='M658.997935%20371.960547l-221.708498-221.709521c-32.652677-32.651654-85.591377-32.651654-118.244055%200-32.652677%2032.652677-32.652677%2085.591377%200%20118.244055l210.686467%20210.243375c15.095813%2017.272385%2017.229406%2044.333718%200%2061.45363L319.045383%20751.324714c-32.652677%2032.652677-32.652677%2085.590354%200%20118.242008%2032.652677%2032.652677%2085.591377%2032.652677%20118.244055%200L658.992819%20647.862317C753.919818%20552.936341%20758.562559%20471.524147%20658.997935%20371.960547L658.997935%20371.960547zM658.997935%20371.960547'%20p-id='1301'%20fill='%231296db'%3e%3c/path%3e%3c/svg%3e";Ie(le)&&console.warn("Please install valaxy-addon-hitokoto");const Bt={class:"sakura-hero-info-overlay"},Ft={class:"px-2 text-lg"},Ut={class:"mx-5 mt-4 flex justify-between"},Ot=["href"],zt=["src"],Wt={class:"mx-5 justify-between",flex:"~ center"},Zt=["href"],jt=["src"],ne=100,Gt=200,Qt=b({__name:"SakuraHeroInfoOverlay",props:{hero:{}},setup(s){const e=s,t=Q(),n=Ce(),r=Ee(),a=y(()=>e.hero||r.value.hero),u=y(()=>a.value.socials||t.value.social),{hitokoto:o,fetchHitokoto:i}=y(()=>a.value.enableHitokoto?le?.useAddonHitokoto(r.value.hero.hitokoto)||{}:{hitokoto:void 0,fetchHitokoto:()=>{}}).value;function l(){const p=o?.value?.hitokoto??o?.hitokoto??"",v=Array.from(String(p)).length*ne+Gt;globalThis.setTimeout(()=>{i()},v)}return(p,d)=>{const v=Dt,_=_e;return c(),m("div",Bt,[S(p.$slots,"highlighted-text",{},()=>[I(v,{class:A(f(n).wallpaperIsPlaying?"sakura-fade-out-up":"sakura-fade-in-down"),text:a.value.title},null,8,["class","text"])],!0),g("div",{class:A(["sakura-info-card",f(n).wallpaperIsPlaying?"sakura-slit-out-horizontal":"sakura-slit-in-horizontal"])},[g("div",{class:A(f(r).hero.socialStyle==="merge"&&"sakura-social-card")},[S(p.$slots,"muted-text",{},()=>[g("div",{class:A(["flex justify-center",f(r).hero.socialStyle==="separate"&&"sakura-social-card"])},[d[4]||(d[4]=g("span",{class:"inline-block","i-fa6-solid-quote-left":""},null,-1)),g("span",Ft,[f(r).hero.typewriter?(c(),m(P,{key:0},[a.value.enableHitokoto?k("v-if",!0):(c(),T(_,{key:0,"type-string":a.value.motto,loop:"",delay:100,"pause-for":1e4,"delete-all":100},null,8,["type-string"])),f(r).hero.typewriter&&a.value.enableHitokoto?(c(),T(_,{key:f(o)?.id||f(o)?.hitokoto,"type-string":f(o)?.hitokoto,loop:"",delay:100,"pause-for":1e4,"delete-all":ne,onAllTypingFinished:l},null,8,["type-string"])):k("v-if",!0)],64)):(c(),m(P,{key:1},[z(Z(a.value.enableHitokoto?f(o)?.hitokoto:a.value.motto),1)],64))]),d[5]||(d[5]=g("span",{class:"inline-block","i-fa6-solid-quote-right":""},null,-1))],2)],!0),f(r).hero.socialStyle==="merge"?S(p.$slots,"social",{key:0},()=>[g("div",Ut,[g("img",{class:"sakura-icon","rotate-180":"","cursor-pointer":"",src:D,alt:"Previous media",onClick:d[0]||(d[0]=(...h)=>f(n).prevWallpaper&&f(n).prevWallpaper(...h))}),(c(!0),m(P,null,F(u.value,h=>(c(),m("a",{key:h?.name,style:W({"--sakura-color-icon":h?.color}),href:h?.link,"aria-label":"icon",target:"_blank"},[h?.icon?(c(),m("div",{key:0,class:A([[h.icon],"sakura-icon"])},null,2)):h?.img?(c(),m("img",{key:1,src:h.img,class:"sakura-icon"},null,8,zt)):k("v-if",!0)],12,Ot))),128)),g("img",{class:"sakura-icon","cursor-pointer":"",src:D,alt:"Next media",onClick:d[1]||(d[1]=(...h)=>f(n).nextWallpaper&&f(n).nextWallpaper(...h))})])],!0):k("v-if",!0)],2)],2),f(r).hero.socialStyle==="separate"||f(r).hero.socialStyle==="single"?S(p.$slots,"social",{key:0},()=>[g("div",{class:A(["sakura-info-card",f(r).hero.socialStyle==="separate"&&"sakura-social-card"])},[g("div",Wt,[g("img",{class:"sakura-icon","rotate-180":"","cursor-pointer":"",src:D,alt:"Previous media",onClick:d[2]||(d[2]=(...h)=>f(n).prevWallpaper&&f(n).prevWallpaper(...h))}),(c(!0),m(P,null,F(u.value,h=>(c(),m("a",{key:h?.name,flex:"~ center",class:A(f(r).hero.socialStyle==="single"&&"sakura-social-card"),style:W({"--sakura-color-icon":h?.color}),href:h?.link,"aria-label":"icon",target:"_blank"},[h?.icon?(c(),m("div",{key:0,class:A([[h.icon],"sakura-icon"])},null,2)):h?.img?(c(),m("img",{key:1,src:h.img,class:"sakura-icon"},null,8,jt)):k("v-if",!0)],14,Zt))),128)),g("img",{class:"sakura-icon","cursor-pointer":"",src:D,alt:"Next media",onClick:d[3]||(d[3]=(...h)=>f(n).nextWallpaper&&f(n).nextWallpaper(...h))})])],2)],!0):k("v-if",!0)])}}}),Jt=E(Qt,[["__scopeId","data-v-cad81e13"]]),Yt={},Xt={class:"sakura-waves-ripple",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 24 150 28",preserveAspectRatio:"none","shape-rendering":"auto"};function Kt(s,e){return c(),m("svg",Xt,[...e[0]||(e[0]=[Te('<defs data-v-aac1fc2f><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z" data-v-aac1fc2f></path></defs><g class="sakura-waves-ripple-parallax" data-v-aac1fc2f><use xlink:href="#gentle-wave" x="48" y="0" fill="rgba(255,255,255,0.7" data-v-aac1fc2f></use><use xlink:href="#gentle-wave" x="48" y="3" fill="rgba(255,255,255,0.5)" data-v-aac1fc2f></use><use xlink:href="#gentle-wave" x="48" y="5" fill="rgba(255,255,255,0.3)" data-v-aac1fc2f></use><use xlink:href="#gentle-wave" x="48" y="7" fill="oklch(100% 0 0)" data-v-aac1fc2f></use></g>',2)])])}const es=E(Yt,[["render",Kt],["__scopeId","data-v-aac1fc2f"]]),ts={};function ss(s,e){return c(),m(P,null,[e[0]||(e[0]=g("div",{class:"front-wave absolute bottom-0 z-0 h-65px w-[400%]"},null,-1)),e[1]||(e[1]=g("div",{class:"foreground-wave absolute bottom-0 z-1 h-80px w-[400%]"},null,-1))],64)}const is=E(ts,[["render",ss],["__scopeId","data-v-7a064510"]]),ns={id:"j-fish-skip",class:"absolute bottom--50px h-180px w-full"},rs=b({__name:"SakuraWaveFish",props:{color:{}},setup(s){const e=s,t=xe();let n;R(()=>t.isDark,async()=>{setTimeout(()=>{n.updateFishColor()},0)});class r{constructor(i){this.props=i,this.POINT_INTERVAL=5,this.FISH_COUNT=3,this.MAX_INTERVAL_COUNT=50,this.INIT_HEIGHT_RATE=.5,this.THRESHOLD=50,this.WATCH_INTERVAL=100,this.fishColor="",this.points=[],this.fishes=[],this.watchIds=[]}init(){this.updateFishColor(this.props.color),this.setParameters(),this.reconstructMethods(),this.setup(),this.bindEvent(),this.render()}getComputedDefaultColor(){return window.getComputedStyle(window?.document?.documentElement).getPropertyValue("--sakura-color-background")?.trim()}updateFishColor(i){this.fishColor=i||this.getComputedDefaultColor()}setParameters(){this.window=window,this.container=document.getElementById("j-fish-skip"),this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.container.appendChild(this.canvas),this.points=[],this.fishes=[],this.watchIds=[]}createSurfacePoints(){const i=Math.round(this.width/this.POINT_INTERVAL);this.pointInterval=this.width/(i-1),this.points.push(new a(this,0));for(let l=1;l<i;l++){const p=new a(this,l*this.pointInterval),d=this.points[l-1];p.setPreviousPoint(d),d.setNextPoint(p),this.points.push(p)}}reconstructMethods(){this.watchWindowSize=this.watchWindowSize.bind(this),this.jdugeToStopResize=this.jdugeToStopResize.bind(this),this.startEpicenter=this.startEpicenter.bind(this),this.moveEpicenter=this.moveEpicenter.bind(this),this.reverseVertical=this.reverseVertical.bind(this),this.render=this.render.bind(this)}setup(){this.points.length=0,this.fishes.length=0,this.watchIds.length=0,this.intervalCount=this.MAX_INTERVAL_COUNT,this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,this.fishCount=this.FISH_COUNT*this.width/500*this.height/500,this.canvas.setAttribute("width",this.width.toString()),this.canvas.setAttribute("height",this.height.toString()),this.reverse=!1,this.fishes.push(new u(this)),this.createSurfacePoints()}watchWindowSize(){this.clearTimer(),this.tempWidth=window.innerWidth,this.tempHeight=window.innerHeight,this.watchIds.push(setTimeout(this.jdugeToStopResize,this.WATCH_INTERVAL))}clearTimer(){for(;this.watchIds.length>0;)clearTimeout(this.watchIds.pop())}jdugeToStopResize(){const i=window.innerWidth,l=window.innerHeight,p=i===this.tempWidth&&l===this.tempHeight;this.tempWidth=i,this.tempHeight=l,p&&this.setup()}bindEvent(){window.addEventListener("resize",this.watchWindowSize.bind(this)),this.container.addEventListener("mouseenter",this.startEpicenter.bind(this)),this.container.addEventListener("mousemove",this.moveEpicenter.bind(this))}getAxis(i){const l=this.container.getBoundingClientRect();return{x:i.clientX-l.left+window.scrollX,y:i.clientY-l.top+window.scrollY}}startEpicenter(i){this.axis=this.getAxis(i)}moveEpicenter(i){const l=this.getAxis(i);this.axis||(this.axis=l),this.generateEpicenter(l.x,l.y,l.y-this.axis.y),this.axis=l}generateEpicenter(i,l,p){if(!(l<this.height/2-this.THRESHOLD||l>this.height/2+this.THRESHOLD)){const d=Math.round(i/this.pointInterval);d<0||d>=this.points.length||this.points[d].interfere(l,p)}}reverseVertical(){this.reverse=!this.reverse;for(let i=0,l=this.fishes.length;i<l;i++)this.fishes[i].reverseVertical()}controlStatus(){for(let i=0,l=this.points.length;i<l;i++)this.points[i].updateSelf();for(let i=0,l=this.points.length;i<l;i++)this.points[i].updateNeighbors();this.fishes.length<this.fishCount&&--this.intervalCount===0&&(this.intervalCount=this.MAX_INTERVAL_COUNT,this.fishes.push(new u(this)))}render(){requestAnimationFrame(()=>this.render()),this.controlStatus(),this.context.clearRect(0,0,this.width,this.height),this.context.fillStyle=this.fishColor;for(let i=0,l=this.fishes.length;i<l;i++)this.fishes[i].render(this.context);this.context.save(),this.context.globalCompositeOperation="xor",this.context.beginPath(),this.context.moveTo(0,this.reverse?0:this.height);for(let i=0,l=this.points.length;i<l;i++)this.points[i].render(this.context);this.context.lineTo(this.width,this.reverse?0:this.height),this.context.closePath(),this.context.fill(),this.context.restore()}}class a{constructor(i,l){this.SPRING_CONSTANT=.03,this.SPRING_FRICTION=.9,this.WAVE_SPREAD=.3,this.ACCELARATION_RATE=.01,this.renderer=i,this.x=l,this.init()}init(){this.initHeight=this.renderer.height*this.renderer.INIT_HEIGHT_RATE,this.height=this.initHeight,this.fy=0,this.force={previous:0,next:0}}setPreviousPoint(i){this.previous=i}setNextPoint(i){this.next=i}interfere(i,l){this.fy=this.renderer.height*this.ACCELARATION_RATE*(this.renderer.height-this.height-i>=0?-1:1)*Math.abs(l)}updateSelf(){this.fy+=this.SPRING_CONSTANT*(this.initHeight-this.height),this.fy*=this.SPRING_FRICTION,this.height+=this.fy}updateNeighbors(){this.previous&&(this.force.previous=this.WAVE_SPREAD*(this.height-this.previous.height)),this.next&&(this.force.next=this.WAVE_SPREAD*(this.height-this.next.height))}render(i){this.previous&&(this.previous.height+=this.force.previous,this.previous.fy+=this.force.previous),this.next&&(this.next.height+=this.force.next,this.next.fy+=this.force.next),i.lineTo(this.x,this.renderer.height-this.height)}}class u{constructor(i){this.GRAVITY=.4,this.renderer=i,this.init()}init(){this.direction=Math.random()<.5,this.x=this.direction?this.renderer.width+this.renderer.THRESHOLD:-this.renderer.THRESHOLD,this.previousY=this.y,this.vx=this.getRandomValue(4,10)*(this.direction?-1:1),this.renderer.reverse?(this.y=this.getRandomValue(1*this.renderer.height/10,4*this.renderer.height/10),this.vy=this.getRandomValue(2,5),this.ay=this.getRandomValue(.05,.2)):(this.y=this.getRandomValue(6*this.renderer.height/10,9*this.renderer.height/10),this.vy=this.getRandomValue(-5,-2),this.ay=this.getRandomValue(-.2,-.05)),this.isOut=!1,this.theta=0,this.phi=0}getRandomValue(i,l){return i+(l-i)*Math.random()}reverseVertical(){this.isOut=!this.isOut,this.ay*=-1}controlStatus(){this.previousY=this.y,this.x+=this.vx,this.y+=this.vy,this.vy+=this.ay,this.renderer.reverse?this.y>this.renderer.height*this.renderer.INIT_HEIGHT_RATE?(this.vy-=this.GRAVITY,this.isOut=!0):(this.isOut&&(this.ay=this.getRandomValue(.05,.2)),this.isOut=!1):this.y<this.renderer.height*this.renderer.INIT_HEIGHT_RATE?(this.vy+=this.GRAVITY,this.isOut=!0):(this.isOut&&(this.ay=this.getRandomValue(-.2,-.05)),this.isOut=!1),this.isOut||(this.theta+=Math.PI/20,this.theta%=2*Math.PI,this.phi+=Math.PI/30,this.phi%=2*Math.PI),this.renderer.generateEpicenter(this.x+(this.direction?-1:1)*this.renderer.THRESHOLD,this.y,this.y-this.previousY),(this.vx>0&&this.x>this.renderer.width+this.renderer.THRESHOLD||this.vx<0&&this.x<-this.renderer.THRESHOLD)&&this.init()}render(i){i.save(),i.translate(this.x,this.y),i.rotate(Math.PI+Math.atan2(this.vy,this.vx)),i.scale(1,this.direction?1:-1),i.beginPath(),i.moveTo(-30,0),i.bezierCurveTo(-20,15,15,10,40,0),i.bezierCurveTo(15,-10,-20,-15,-30,0),i.fill(),i.save(),i.translate(40,0),i.scale(.9+.2*Math.sin(this.theta),1),i.beginPath(),i.moveTo(0,0),i.quadraticCurveTo(5,10,20,8),i.quadraticCurveTo(12,5,10,0),i.quadraticCurveTo(12,-5,20,-8),i.quadraticCurveTo(5,-10,0,0),i.fill(),i.restore(),i.save(),i.translate(-3,0),i.rotate((Math.PI/3+Math.PI/10*Math.sin(this.phi))*(this.renderer.reverse?-1:1)),i.beginPath(),this.renderer.reverse?(i.moveTo(5,0),i.bezierCurveTo(10,10,10,30,0,40),i.bezierCurveTo(-12,25,-8,10,0,0)):(i.moveTo(-5,0),i.bezierCurveTo(-10,-10,-10,-30,0,-40),i.bezierCurveTo(12,-25,8,-10,0,0)),i.closePath(),i.fill(),i.restore(),i.restore(),this.controlStatus()}}return G(()=>{n=new r(e),n.init()}),(o,i)=>(c(),m("div",ns))}}),as={class:"sakura-hero-background"},os=["loop","muted","disablePictureInPicture"],ls=["src"],us={key:1,class:"sakura-hero-background-default h-full w-full"},hs=b({__name:"SakuraHeroBackground",props:{urls:{}},setup(s){const e=s,t=j([]),n=M(),r=C(),a=y(()=>e.urls||r.value.hero.urls||""),u=y(()=>r.value.hero),o=y(()=>{if(typeof a.value=="string")return a.value;if(u.value.randomUrls){let l=null;do{const p=u.value.urls.length;l=Math.floor(Math.random()*p)}while(t.value.includes(l));return a.value[l]}return a.value[n.wallpaperIndex]}),i=y(()=>Ve(o.value));return R(()=>n.wallpaperIndex,(l,p)=>{const d=u.value.urls.length;t.value.length===d&&(t.value=[]),t.value.push(p)}),R(()=>n.wallpaperIndex,()=>{n.wallpaperIndex>=a.value.length&&(n.wallpaperIndex=0)},{immediate:!0}),R(()=>a.value.length,l=>{n.wallpaperLength=l},{immediate:!0}),(l,p)=>(c(),m("div",as,[I(Se,{name:f(n).wallpaperOperation==="nextMedia"?"slide-right":f(n).wallpaperOperation==="prevMedia"?"slide-left":"fade",mode:"out-in"},{default:x(()=>[f(n).wallpaperIsPlaying||i.value?(c(),m("video",{key:f(n).wallpaperIsPlaying?u.value.playerUrl:o.value,class:"min-h-full min-w-full object-cover",preload:"auto",autoplay:"",loop:!f(n).wallpaperIsPlaying,muted:!f(n).wallpaperIsPlaying,disablePictureInPicture:u.value.disablePictureInPicture,onEnded:p[0]||(p[0]=d=>f(n).wallpaperIsPlaying=!1)},[g("source",{src:f(n).wallpaperIsPlaying?u.value.playerUrl:o.value,type:"video/mp4"},null,8,ls),p[1]||(p[1]=z(" Your browser does not support video tags ",-1))],40,os)):(c(),m(P,{key:1},[o.value?(c(),m("div",{key:o.value,class:"sakura-hero-background-img",style:W({backgroundImage:`url(${o.value})`,backgroundAttachment:u.value.fixedImg?"fixed":"scroll"})},null,4)):(c(),m("div",us))],64))]),_:1},8,["name"])]))}}),cs={class:"sakura-hero <md:px-5"},ds={"z-4":"",class:"info-overlay"},ps=b({__name:"SakuraHero",props:{hero:{}},setup(s){const e=s,t=C(),n=M(),r=Re(),a=y(()=>e.hero||t.value.hero),u=y(()=>n.wallpaperIsPlaying?"sakura-fade-out-down":"sakura-fade-in-up");return R(()=>n.wallpaperIsPlaying,o=>{const i=document.querySelector(".sakura-navbar");i?.classList.toggle("sakura-fade-in-down",!o),i?.classList.toggle("sakura-fade-out-up",o);const l=document.querySelector("#live2d-tool-quit"),p=document.querySelector("#live2d-tools");(o&&p?.className==="show"||!o&&p?.className==="hide")&&l instanceof HTMLElement&&l.click()}),(o,i)=>{const l=hs,p=rs,d=is,v=es,_=Jt,h=ut,w=rt;return c(),m("header",cs,[f(r)?(c(),m(P,{key:0},[g("div",{class:A(["absolute inset-0 overflow-hidden",[!f(n).wallpaperIsPlaying&&a.value.style&&"hero-style",a.value.style]])},[S(o.$slots,"background",{},()=>[I(l,{urls:a.value?.urls},null,8,["urls"])]),a.value?.waveTheme?(c(),m("div",{key:0,class:A(u.value)},[S(o.$slots,"overlay-bar",{},()=>[a.value.waveTheme==="fish"?(c(),T(p,{key:0})):a.value.waveTheme==="horizontal"?(c(),T(d,{key:1})):a.value.waveTheme==="ripple"?(c(),T(v,{key:2})):k("v-if",!0)])],2)):k("v-if",!0)],2),g("div",ds,[S(o.$slots,"info-overlay",{},()=>[I(_,{hero:a.value},null,8,["hero"])])]),S(o.$slots,"player",{},()=>[a.value?.playerUrl?(c(),T(h,{key:0,class:"absolute bottom-2 right-2 z-4 h-8 w-8"})):k("v-if",!0)]),g("div",{class:A([u.value,"absolute bottom-12 right-50% z-4"])},[S(o.$slots,"scroll-down",{},()=>[f(t).scrollDown?.enable?(c(),T(w,{key:0})):k("v-if",!0)])],2)],64)):k("v-if",!0)])}}}),fs={class:"sakura-home",flex:"~ col center"},ms=b({__name:"SakuraHomeLayout",setup(s){const e=C();return(t,n)=>{const r=ps,a=it,u=Xe,o=He,i=Ne,l=Ge;return c(),m(P,null,[S(t.$slots,"hero",{},()=>[I(r)]),g("div",fs,[I(i,{class:"sakura-safe-padding sakura-home-layout sakura-site-content",base:""},be({default:x(()=>[S(t.$slots,"notice-board",{},()=>[I(a)]),S(t.$slots,"post-pinned",{},()=>[f(e).pinnedPost?(c(),T(u,{key:0})):k("v-if",!0)]),S(t.$slots,"post-list",{},()=>[I(o)])]),_:2},[t.$slots.right?{name:"right",fn:x(()=>[S(t.$slots,"right")]),key:"0"}:void 0,t.$slots.left?{name:"left",fn:x(()=>[S(t.$slots,"left")]),key:"1"}:void 0]),1024),S(t.$slots,"pagination",{},()=>[I(l)])])],64)}}}),Es=b({__name:"home",setup(s){const e=qe(),t=M(),n=y(()=>Number.parseInt(e.params.page));return De(()=>{const r=document.documentElement.scrollTop;t.setScrollPosition(e.path,r)}),R(()=>n.value,async r=>{t.curPage=r}),(r,a)=>{const u=ms;return c(),T(u)}}});export{Es as default};
